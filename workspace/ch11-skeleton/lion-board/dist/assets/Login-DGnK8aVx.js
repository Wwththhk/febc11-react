import{m as f,c as h,j as e,L as i}from"./index-B8grBGTx.js";import{a as y,u as j,I as m}from"./index.esm-DSuZsbif.js";import{u as k}from"./index-SYigVxrp.js";import{u as N}from"./userStore-BYH4lJr9.js";function S(){const d=N(s=>s.setUser),c=f(),u=h(),{register:o,handleSubmit:x,formState:{errors:n},setError:g}=y({defaultValues:{email:"yong@gmail.com",password:"11111112"}}),p=k(),b=j({mutationFn:s=>p.post("/users/login",s),onSuccess:s=>{var a,t;console.log(s);const r=s.data.item;d({_id:r._id,name:r.name,profile:(a=r.image)==null?void 0:a.path,accessToken:r.token.accessToken,refreshToken:r.token.refreshToken}),alert(s.data.item.name+"님, 로그인 되었습니다."),u(((t=c.state)==null?void 0:t.from)||"/")},onError:s=>{var r,a,t;console.error(s),(r=s.response)!=null&&r.data.errors?(a=s.response)==null||a.data.errors.forEach(l=>g(l.path,{message:l.msg})):alert(((t=s.response)==null?void 0:t.data.message)||"잠시후 다시 요청하세요.")}});return e.jsx(e.Fragment,{children:e.jsx("main",{className:"min-w-80 flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"p-8 border border-gray-200 rounded-lg w-full max-w-md dark:bg-gray-600 dark:border-0",children:[e.jsx("div",{className:"text-center py-4",children:e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-200",children:"로그인"})}),e.jsxs("form",{onSubmit:x(b.mutate),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-2",htmlFor:"email",children:"이메일"}),e.jsx("input",{id:"email",type:"email",placeholder:"이메일을 입력하세요",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-orange-400 dark:bg-gray-700",...o("email",{required:"이메일은 필수입니다."})}),e.jsx(m,{target:n.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-2",htmlFor:"password",children:"비밀번호"}),e.jsx("input",{id:"password",type:"password",placeholder:"비밀번호를 입력하세요",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-orange-400 dark:bg-gray-700",...o("password",{required:"비밀번호는 필수입니다."})}),e.jsx(m,{target:n.password}),e.jsx(i,{to:"#",className:"block mt-6 ml-auto text-gray-500 text-sm dark:text-gray-300 hover:underline",children:"비밀번호를 잊으셨나요?"})]}),e.jsxs("div",{className:"mt-10 flex justify-center items-center",children:[e.jsx("button",{type:"submit",className:"bg-orange-500 py-1 px-4 text-base text-white font-semibold ml-2 hover:bg-amber-400 rounded",children:"로그인"}),e.jsx(i,{to:"/users/signup",className:"ml-8 text-gray-800 hover:underline",children:"회원가입"})]})]})]})})})}export{S as default};
