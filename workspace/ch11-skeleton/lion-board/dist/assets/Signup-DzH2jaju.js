import{c as g,j as e,L as u}from"./index-B8grBGTx.js";import{a as b,u as h,I as o}from"./index.esm-DSuZsbif.js";import{u as y}from"./index-SYigVxrp.js";import"./userStore-BYH4lJr9.js";function k(){const m=g(),{register:r,handleSubmit:c,formState:{errors:l},setError:x}=b(),d=y(),p=h({mutationFn:async a=>{if(a.attach.length>0){const t=new FormData;t.append("attach",a.attach[0]);const s=await d("/files",{method:"post",headers:{"Content-Type":"multipart/form-data"},data:t});a.image=s.data.item[0],delete a.attach}return a.type="user",console.log(a),d.post("/users",a)},onSuccess:()=>{alert("회원가입 완료"),m("/")},onError:a=>{var t,s,n;console.error(a),(t=a.response)!=null&&t.data.errors?(s=a.response)==null||s.data.errors.forEach(i=>x(i.path,{message:i.msg})):alert(((n=a.response)==null?void 0:n.data.message)||"잠시후 다시 요청하세요.")}});return e.jsx("main",{className:"min-w-80 flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"p-8 border border-gray-200 rounded-lg w-full max-w-md dark:bg-gray-600 dark:border-0",children:[e.jsx("div",{className:"text-center py-4",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-700 dark:text-gray-200",children:"회원 가입"})}),e.jsxs("form",{onSubmit:c(p.mutate),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-2",htmlFor:"name",children:"이름"}),e.jsx("input",{type:"text",id:"name",placeholder:"이름을 입력하세요",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-orange-400 dark:bg-gray-700",...r("name",{required:"이름은 필수입니다."})}),e.jsx(o,{target:l.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-2",htmlFor:"email",children:"이메일"}),e.jsx("input",{type:"email",id:"email",placeholder:"이메일을 입력하세요",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-orange-400 dark:bg-gray-700",...r("email",{required:"이메일은 필수입니다."})}),e.jsx(o,{target:l.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-2",htmlFor:"password",children:"비밀번호"}),e.jsx("input",{type:"password",id:"password",placeholder:"비밀번호를 입력하세요",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-orange-400 dark:bg-gray-700",...r("password",{required:"비밀번호는 필수입니다."})}),e.jsx(o,{target:l.password})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-2",htmlFor:"attach",children:"프로필 이미지"}),e.jsx("input",{type:"file",id:"attach",accept:"image/*",placeholder:"이미지를 선택하세요",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700",...r("attach")})]}),e.jsxs("div",{className:"mt-10 flex justify-center items-center",children:[e.jsx("button",{type:"submit",className:"bg-orange-500 py-1 px-4 text-base text-white font-semibold ml-2 hover:bg-amber-400 rounded",children:"회원가입"}),e.jsx(u,{to:"/",className:"bg-gray-900 py-1 px-4 text-base text-white font-semibold ml-2 hover:bg-amber-400 rounded",children:"취소"})]})]})]})})}export{k as default};
