import{b as x,c as b,a as p,j as e,L as g}from"./index-B8grBGTx.js";import{a as y,u as h,I as i}from"./index.esm-DSuZsbif.js";import{u as f}from"./index-SYigVxrp.js";import{u as j}from"./useQuery-DjLx6EtE.js";import"./userStore-BYH4lJr9.js";function $(){const{type:o,_id:t}=x(),a=f(),{data:s}=j({queryKey:["posts",t],queryFn:()=>a.get(`/posts/${t}`),select:r=>r.data,staleTime:1e3*10}),c=b(),{register:n,handleSubmit:u,formState:{errors:l}}=y({defaultValues:{title:s==null?void 0:s.item.title,content:s==null?void 0:s.item.content}}),d=p(),m=h({mutationFn:r=>a.patch(`/posts/${t}`,r),onSuccess:()=>{alert("게시물이 수정되었습니다."),d.invalidateQueries({queryKey:["posts",t]}),c(`/${o}/${t}`)},onError:r=>{console.error(r)}});return e.jsxs("main",{className:"min-w-[320px] p-4",children:[e.jsx("div",{className:"text-center py-4",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-700 dark:text-gray-200",children:"게시글 수정"})}),e.jsx("section",{className:"mb-8 p-4",children:e.jsxs("form",{onSubmit:u(m.mutate),children:[e.jsxs("div",{className:"my-4",children:[e.jsx("label",{className:"block text-lg content-center",htmlFor:"title",children:"제목"}),e.jsx("input",{id:"title",type:"text",placeholder:"제목을 입력하세요.",className:"w-full py-2 px-4 border rounded-md dark:bg-gray-700 border-gray-300 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200",...n("title",{required:"제목은 필수입니다."})}),e.jsx(i,{target:l.title})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("label",{className:"block text-lg content-center",htmlFor:"content",children:"내용"}),e.jsx("textarea",{id:"content",rows:"15",placeholder:"내용을 입력하세요.",className:"w-full p-4 text-sm border rounded-lg border-gray-300 bg-gray-50 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",...n("content",{required:"내용은 필수입니다."})}),e.jsx(i,{target:l.content})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-end my-6",children:[e.jsx("button",{type:"submit",className:"bg-orange-500 py-1 px-4 text-base text-white font-semibold ml-2 hover:bg-amber-400 rounded",children:"수정"}),e.jsx(g,{to:`/${o}/${t}`,className:"bg-gray-900 py-1 px-4 text-base text-white font-semibold ml-2 hover:bg-amber-400 rounded",children:"취소"})]})]})})]})}export{$ as default};
